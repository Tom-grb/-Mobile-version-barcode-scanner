{"version":3,"file":"goods-popup.js","sources":["components/goods-popup/goods-popup.vue","../../AAAloaddown/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RDovd2VpeGluX3BqL-aJq-S4gOaJqy9jb21wb25lbnRzL2dvb2RzLXBvcHVwL2dvb2RzLXBvcHVwLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"popup-mask\" v-if=\"show\" @click.stop=\"cancel\">\r\n\t\t<view class=\"popup-content\" @click.stop>\r\n\t\t\t<view class=\"popup-header\">\r\n\t\t\t\t<text class=\"title\">商品信息</text>\r\n\t\t\t\t<text class=\"close-btn\" @click=\"cancel\">×</text>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"popup-body\">\r\n\t\t\t\t<view class=\"form-item\">\r\n\t\t\t\t\t<text class=\"label\">商品条形码</text>\r\n\t\t\t\t\t<input v-if=\"isEditing\" v-model=\"localGoods.goods_sn\" class=\"input\" placeholder=\"请输入商品名称\" />\r\n\t\t\t\t\t<text v-else class=\"value\">{{goods.goods_sn || '暂未填写'}}</text>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"form-item\">\r\n\t\t\t\t\t<text class=\"label\">商品名称</text>\r\n\t\t\t\t\t<input v-if=\"isEditing\" v-model=\"localGoods.goods_name\" class=\"input\" placeholder=\"请输入商品名称\" />\r\n\t\t\t\t\t<text v-else class=\"value\">{{goods.goods_name}}</text>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"form-item\">\r\n\t\t\t\t\t<text class=\"label\">商品价格</text>\r\n\t\t\t\t\t<input v-if=\"isEditing\" v-model=\"localGoods.goods_price\" class=\"input\" type=\"digit\"\r\n\t\t\t\t\t\tplaceholder=\"请输入商品价格\" />\r\n\t\t\t\t\t<text v-else class=\"value\">￥{{goods.goods_price}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"form-item\">\r\n\t\t\t\t\t<text class=\"label\">商品数量</text>\r\n\t\t\t\t\t<input v-if=\"isEditing\" v-model=\"localGoods.goods_num\" class=\"input\" type=\"digit\" placeholder=\"请输入商品数量\" />\r\n\t\t\t\t\t<text v-else class=\"value\">{{goods.goods_num || '暂无数量'}}</text>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"form-item\">\r\n\t\t\t\t\t<text class=\"label\">商品备注</text>\r\n\t\t\t\t\t<input v-if=\"isEditing\" v-model=\"localGoods.goods_notes\" class=\"input\" placeholder=\"请输入商品备注\" />\r\n\t\t\t\t\t<text v-else class=\"value\">{{goods.goods_notes || '暂无备注'}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"popup-footer\">\r\n\t\t\t\t<button v-if=\"!isEditing\" @click=\"handleEdit\" class=\"btn edit-btn\">编辑</button>\r\n\t\t\t\t<block v-else>\r\n\t\t\t\t\t<button @click=\"handleConfirm\" class=\"btn confirm-btn\">确认</button>\r\n\t\t\t\t\t<button @click=\"handleCancel\" class=\"btn back-btn\">返回</button>\r\n\t\t\t\t</block>\r\n\t\t\t\t<button @click=\"handleDelete\" class=\"btn delete-btn\">删除</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\tconst goodsInfoObj = uniCloud.importObject('goodsInfoObj')\r\n\r\n\texport default {\r\n\t\tname: 'goods-popup',\r\n\t\tprops: {\r\n\t\t\tshow: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\tgoods: {\r\n\t\t\t\ttype: Object,\r\n\t\t\t\tdefault: () => ({})\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tisEditing: false,\r\n\t\t\t\tlocalGoods: {}\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tgoods: {\r\n\t\t\t\thandler(newVal) {\r\n\t\t\t\t\tthis.localGoods = JSON.parse(JSON.stringify(newVal))\r\n\t\t\t\t},\r\n\t\t\t\timmediate: true\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgotoLogin(){\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/uni_modules/uni-id-pages/pages/login/login-withoutpwd'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tcancel() {\r\n\t\t\t\tthis.isEditing = false\r\n\t\t\t\tthis.$emit('update:show', false)\r\n\t\t\t},\r\n\t\t\thandleEdit() {\r\n\t\t\t\tthis.isEditing = true\r\n\t\t\t},\r\n\t\t\thandleCancel() {\r\n\t\t\t\tthis.isEditing = false\r\n\t\t\t\tthis.localGoods = JSON.parse(JSON.stringify(this.goods))\r\n\t\t\t},\r\n\t\t\tasync handleConfirm() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tthis.localGoods.goods_price = parseFloat(this.localGoods.goods_price)\r\n\t\t\t\t\tthis.localGoods.goods_num = parseFloat(this.localGoods.goods_num)\r\n\t\t\t\t\tif (isNaN(this.localGoods.goods_price) || this.localGoods.goods_price < 0) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '价格要求为数字且大于0',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (isNaN(this.localGoods.goods_num) || this.localGoods.goods_num < 0) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '数量要求为数字且大于0',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst res = await goodsInfoObj.updateGoods(this.localGoods)\r\n\t\t\t\t\tif(res.code===-1){\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '未登录/登录过期',\r\n\t\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\tthis.gotoLogin()\r\n\t\t\t\t\t\t},1000)\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.isEditing = false\r\n\t\t\t\t\tthis.$emit('refresh')\r\n\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '更新失败',\r\n\t\t\t\t\t\ticon: 'error'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync handleDelete() {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\tcontent: '确定要删除该商品吗？',\r\n\t\t\t\t\tsuccess: async (res) => {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tconst rescode = await goodsInfoObj.removeGoods({\r\n\t\t\t\t\t\t\t\t\t_id: this.goods._id\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tif(rescode.code===-1){\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: '未登录/登录过期',\r\n\t\t\t\t\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\t\t\t\tthis.gotoLogin()\r\n\t\t\t\t\t\t\t\t\t},1000)\r\n\t\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '删除成功',\r\n\t\t\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tthis.cancel()\r\n\t\t\t\t\t\t\t\tthis.$emit('refresh')\r\n\t\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '删除失败',\r\n\t\t\t\t\t\t\t\t\ticon: 'error'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.popup-mask {\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\tbackground: rgba(0, 0, 0, 0.6);\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tanimation: fadeIn 0.2s ease-out;\r\n\t}\r\n\r\n\t.popup-content {\r\n\t\twidth: 80%;\r\n\t\tbackground: #fff;\r\n\t\tborder-radius: 32rpx;\r\n\t\toverflow: hidden;\r\n\t\tanimation: slideIn 0.2s ease-out;\r\n\t}\r\n\r\n\t.popup-header {\r\n\t\tpadding: 0 24rpx;\r\n\t\tborder-bottom: 2rpx solid #eee;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.title {\r\n\t\tfont-size: 36rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.close-btn {\r\n\t\tfont-size: 48rpx;\r\n\t\tcolor: #999;\r\n\t\tpadding: 8rpx 16rpx;\r\n\t}\r\n\r\n\t.popup-body {\r\n\t\tpadding: 24rpx 24rpx;\r\n\t}\r\n\r\n\t.form-item {\r\n\t\tmargin-bottom: 10rpx;\r\n\t}\r\n\t\r\n\r\n\t.label {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #666;\r\n\t\tmargin-bottom: 7rpx;\r\n\t\tdisplay: block;\r\n\t}\r\n\r\n\t.input {\r\n\t\theight: 80rpx;\r\n\t\tborder: 2rpx solid #ddd;\r\n\t\tborder-radius: 16rpx;\r\n\t\tpadding: 0 24rpx;\r\n\t\tfont-size: 32rpx;\r\n\t\ttransition: all 0.3s;\r\n\t\theight: 70rpx;\r\n\t}\r\n\r\n\t.input:focus {\r\n\t\tborder-color: #007aff;\r\n\t\tbox-shadow: 0 0 0 4rpx rgba(0, 122, 255, 0.1);\r\n\t}\r\n\r\n\t.value {\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.popup-footer {\r\n\t\tpadding: 0 25rpx 25rpx;\r\n\t\tdisplay: flex;\r\n\t\tgap: 24rpx;\r\n\t}\r\n\r\n\t.btn {\r\n\t\tflex: 1;\r\n\t\theight: 80rpx;\r\n\t\tborder-radius: 16rpx;\r\n\t\tfont-size: 32rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\ttransition: all 0.3s;\r\n\t}\r\n\r\n\t.edit-btn {\r\n\t\tbackground: #007aff;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.confirm-btn {\r\n\t\tbackground: #34c759;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.back-btn {\r\n\t\tbackground: #ff9500;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.delete-btn {\r\n\t\tbackground: #ff3b30;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t@keyframes fadeIn {\r\n\t\tfrom {\r\n\t\t\topacity: 0;\r\n\t\t}\r\n\r\n\t\tto {\r\n\t\t\topacity: 1;\r\n\t\t}\r\n\t}\r\n\r\n\t@keyframes slideIn {\r\n\t\tfrom {\r\n\t\t\ttransform: translateY(20px);\r\n\t\t\topacity: 0;\r\n\t\t}\r\n\r\n\t\tto {\r\n\t\t\ttransform: translateY(0);\r\n\t\t\topacity: 1;\r\n\t\t}\r\n\t}\r\n</style>","import Component from 'D:/weixin_pj/扫一扫/components/goods-popup/goods-popup.vue'\nwx.createComponent(Component)"],"names":["uniCloud","uni"],"mappings":"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"}